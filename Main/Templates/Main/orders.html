{% extends "main/base.html" %} 

{% load static %}

{% block content %} 

<div>
    <header>
        <h1><strong> Management des commandes </strong></h1>
    </header>
    <br>
    <br>
    <a class="btn btn-lg btn-dark " href="{% url 'orders_create' %}" role="button"><strong>Créer une commande</strong></a> 
    <br>
    <br>
    <div class="flex">
        
        {% include "Main/nav_bar.html" %}
        
        <div class="main_block_listing">
            <h2 class="titre_blue_listing"><strong>Listing des commandes</strong></h2>
            <table class="table table-responsive table-striped">
                <thead>
                    <th>Réf</th>
                    <th>Date</th>
                    <th>Nom</th>
                    <th>Produit</th>
                    <th>Quantité</th>
                    <th>Prix Unitaire TTC</th>
                    <th>Frais livraison</th>
                    <th>Remise</th>
                    <th>Prix total TTC</th>
                    <th>Marge</th>

                    <th>Statut</th>
                    <th>Etat livraison</th>
                    <th>Date livraison - prévue</th>
                    <th>Date livraison - effective</th>

                    <th>Note de satisfaction</th>

                </thead>
                <tbody>
                    {% for order in my_order %}
                    <tr>    
                        <td>{{order.id}}</td>
                        <td>{{order.date}}</td>
                        <td>{{order.customer.name}}</td>
                        <td>{{order.product.name}}</td>
                        <td>{{order.quantity}}</td>
                        <td>{{order.product.price_pdt_TTC}}</td>
                        <td>{{order.delivery_fees}}</td>
                        <td>{{order.discount}}</td>
                        <td>{{order.get_total_order_price_TTC}}</td>
                        <td>{{order.commercial_margin_total}}</td>

                        <td>{{order.status}}</td>
                        <td>{{order.late_delivery}}</td>
                        <td>{{order.Delivery_date_expected}}</td>
                        <td>{{order.Delivery_date_final}}</td>

                        <td>{{order.satisfaction_score}}</td>

                        <td><a class="btn btn-sm btn_update_color" href="{% url 'update_order' order.id %}" role="button">update</a></td>
                        <td><a class="btn btn-sm btn_delete_color" href="{% url 'delete_order' order.id %}" role="button">delete</a></td>
                    </tr>

                    {% endfor %}

                </tbody>
            </table> 
        </div>
    </div>
</div>

{% endblock content %}